PROJECT(COMPILE_GTS_GLIB)


  FIND_PROGRAM(TAR_EXE NAMES tar)
  FIND_PROGRAM(MAKE_EXE NAMES make)

  IF(TAR_EXE_FOUND AND MAKE_EXE_FOUND)

  MESSAGE(STATUS "TAR_EXE: " ${TAR_EXE})
  MESSAGE(STATUS "MAKE_EXE: " ${MAKE_EXE})
  MESSAGE(STATUS "WORKING_DIRECTORY: " ${CMAKE_CURRENT_SOURCE_DIR})

  IF(NOT IS_DIRECTORY  ${CMAKE_CURRENT_SOURCE_DIR}/glib-2.22.0)
  MESSAGE(STATUS "UNPACKING GLIB: please wait")
  EXECUTE_PROCESS(
        COMMAND ${TAR_EXE} -xzf glib-2.22.0.tar.gz
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
        OUTPUT_QUIET
        ERROR_QUIET)
  ENDIF(NOT IS_DIRECTORY  ${CMAKE_CURRENT_SOURCE_DIR}/glib-2.22.0)

  MESSAGE(STATUS "CONFIGURING GLIB: please wait")
  EXECUTE_PROCESS(
        COMMAND ./configure --prefix=${CMAKE_BINARY_DIR} --enable-static
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/glib-2.22.0/
        OUTPUT_QUIET
        ERROR_QUIET)
  MESSAGE(STATUS "COMPILING GLIB: please wait")
  EXECUTE_PROCESS(
        COMMAND ${MAKE_EXE} -j2
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/glib-2.22.0/
        OUTPUT_QUIET
        ERROR_QUIET)
  EXECUTE_PROCESS(
        COMMAND ${MAKE_EXE} -j2 install
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/glib-2.22.0/
        OUTPUT_QUIET
        ERROR_QUIET)


  IF(NOT IS_DIRECTORY  ${CMAKE_CURRENT_SOURCE_DIR}/gts-snapshot-100321)
  MESSAGE(STATUS "UNPACKING GTS: please wait")
  EXECUTE_PROCESS(
        COMMAND ${TAR_EXE} -xzf gts-snapshot.tar.gz
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
        OUTPUT_QUIET
        ERROR_QUIET)
  ENDIF(NOT IS_DIRECTORY  ${CMAKE_CURRENT_SOURCE_DIR}/gts-snapshot-100321)

  MESSAGE(STATUS "CONFIGURING GTS: please wait")
  EXECUTE_PROCESS(
        COMMAND ./configure --prefix=${CMAKE_BINARY_DIR} --with-glib-prefix=${CMAKE_BINARY_DIR}
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/gts-snapshot-100321/
        OUTPUT_QUIET
        ERROR_QUIET)
  MESSAGE(STATUS "COMPILING GTS: please wait")
  EXECUTE_PROCESS(
        COMMAND ${MAKE_EXE} -j2
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/gts-snapshot-100321/
        OUTPUT_QUIET
        ERROR_QUIET)
  EXECUTE_PROCESS(
        COMMAND ${MAKE_EXE} -j2 install
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/gts-snapshot-100321/
        OUTPUT_QUIET
        ERROR_QUIET)


  ENDIF(TAR_EXE_FOUND AND MAKE_EXE_FOUND)
